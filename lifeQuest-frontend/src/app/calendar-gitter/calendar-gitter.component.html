<div class="calendar-grid" #calendarGrid>
  @for (items of calendarDays; track $index) {
    <div class="calendar-day">{{ items }}</div>
  }
  @for (timeOfDay of calendarDates; track $index) {
    @for (timeslot of calendarDays; track $index; let dayIndex = $index) {
      <div (click)="addAppointment(timeOfDay,timeslot,$event)" class="time-slot">
        @if (dayIndex === 0) {
          <span class="time-label">{{ timeOfDay }}</span>
        }
      </div>
    }
  }
  @if (showEditor){
    <div class="editor-popup" [style.background-color]="color" [style]="{top: y + 'px', left:x + 'px'}" >
      <input [(ngModel)]="title" type="text" id="appointHeader" placeholder="Your Title here..." >
      <hr>
      <div class="editor-field">
        <label>Time:</label>
        <input type="time" [(ngModel)]="this.selectedTime"> -
        <input type="time" [(ngModel)]="this.selectedEndTime">
      </div>
      <div class="editor-field">
        Color:
        <div class="floating-color-picker">
          <input type="color" [(ngModel)]="color" (change)="closeColorPicker()">
        </div>
      </div>
      <button (click)="save()">Save</button>
      <button (click)="close()">Cancel</button>
    </div>
  }
</div>

<div class="sidebar-container">
  <app-sidebar>
  </app-sidebar>
  <div class="container">
    <div class="header">
      <h3>{{ currentMonth }} {{ currentYear }}</h3>
      <div class="nav">
        <button (click)="prevMonth()">&#x276E;</button>
        <button (click)="nextMonth()">&#x276F;</button>
      </div>
    </div>
    <div class="weekdays">
      @for (day of weekDays; track $index) {
        <div>{{ day }}</div>
      }
    </div>
    <div class="days">
      @for (day of calendarDaysInNumber; track $index) {
        <div>{{day}}</div>
      }
    </div>
  </div>
</div>
@if (shouldAddEntry){
  <div class="add-popup" [style.background-color]="color">
    <input [(ngModel)]="title" type="text" placeholder="Your Title here..." >
    <hr>
    <div class="editor-field">
      <div class="date-picker-wrapper">
        <label for="date-input">Date:</label>
        <div class="date-picker-button">
          <input [(ngModel)]="this.date" type="date" id="date-input" />
        </div>
      </div>
    </div>
    <div class="editor-field">
      <label>Time:</label>
      <input type="time" [(ngModel)]="this.selectedTime"> -
      <input type="time" [(ngModel)]="this.selectedEndTime">
    </div>
    <div class="editor-field">
      Color:
      <div class="floating-color-picker">
        <input type="color" [(ngModel)]="color" (change)="closeColorPicker()">
      </div>
    </div>
    <button (click)="save()">Save</button>
    <button (click)="closePopUp()">Cancel</button>
  </div>
}
